{"remainingRequest":"/Users/dmitri/Documents/Новая папка/Check/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/dmitri/Documents/Новая папка/Check/src/components/Wheel.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"/Users/dmitri/Documents/Новая папка/Check/src/components/Wheel.vue","mtime":1623509977017},{"path":"/Users/dmitri/Documents/Новая папка/Check/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/dmitri/Documents/Новая папка/Check/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/dmitri/Documents/Новая папка/Check/node_modules/postcss-loader/lib/index.js","mtime":499162500000},{"path":"/Users/dmitri/Documents/Новая папка/Check/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmitri/Documents/Новая папка/Check/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmitri/Documents/Новая папка/Check/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.wheel {\n  width: 586px;\n  height: 586px;\n  position: relative;\n  overflow: hidden;\n  background-image: url(\"/img/wheel/wheelOutlineCircle.png\");\n  padding: 8px;\n  background-position: center;\n  background-size: contain;\n  user-select: none;\n  transform: rotate(-67deg);\n  &:before {\n    content: \"\";\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    cursor: pointer;\n    z-index: 1;\n    border-radius: 50%;\n  }\n  &:after {\n    content: \"\";\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    width: calc(100% - 120px);\n    height: calc(100% - 120px);\n    cursor: default;\n    z-index: 2;\n    border-radius: 50%;\n  }\n  .greekBorder {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    width: 480px;\n  }\n  .img {\n    position: absolute;\n    left: 8px;\n    top: 8px;\n    width: calc(100% - 16px);\n    height: calc(100% - 16px);\n  }\n  .rotateItem {\n    transition: 0.3s ease-in-out;\n  }\n  .section {\n    transition: 0.3s ease-in-out;\n    &.next.allow {\n      animation-name: next;\n      animation-duration: 0.3s;\n    }\n    &.prev.allow {\n      animation-name: prev;\n      animation-duration: 0.3s;\n    }\n    @keyframes next {\n      0% {\n        transform: rotate(0deg);\n      }\n      30% {\n        transform: rotate(5deg);\n      }\n      100% {\n        transform: rotate(0deg);\n      }\n    }\n    @keyframes prev {\n      0% {\n        transform: rotate(0deg);\n      }\n      50% {\n        transform: rotate(-5deg);\n      }\n      100% {\n        transform: rotate(0deg);\n      }\n    }\n  }\n}\n",{"version":3,"sources":["Wheel.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Wheel.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"wheel\" ref=\"wheel\" @click=\"click\">\n    <img\n      class=\"img rotateItem\"\n      src=\"/img/wheel/bg.png\"\n      alt=\"bg\"\n      :style=\"{ transform: `rotate(${deg}deg)` }\"\n    />\n    <img\n      v-if=\"!disabled\"\n      class=\"img section\"\n      src=\"/img/wheel/sector.png\"\n      alt=\"bg\"\n      :class=\"{\n        allow: !allowRotate,\n        prev: lastRotation === 'prev',\n        next: lastRotation === 'next'\n      }\"\n    />\n    <img\n      v-if=\"!disabled\"\n      class=\"img rotateItem\"\n      src=\"/img/wheel/items.png\"\n      alt=\"bg\"\n      :style=\"{ transform: `rotate(${deg}deg)` }\"\n    />\n    <icon-greek-border-round class=\"greekBorder\"></icon-greek-border-round>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    disabled: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      W: 586,\n      deg: 0,\n      step: 45,\n      allowRotate: true,\n      lastRotation: \"\"\n    };\n  },\n  methods: {\n    click($event) {\n      if (!this.allowRotate) {\n        return;\n      }\n      this.allowRotate = false;\n      setTimeout(() => {\n        this.allowRotate = true;\n      }, 300);\n      let x = $event.offsetX;\n      let y = $event.offsetY;\n      let range = this.dotsRange(x, y, this.W / 2, this.W / 2);\n      if (range > 290 || range < 230) {\n        return;\n      }\n      let segment = this.getSegment(this.getAngle(x, y));\n      if (segment === 2) {\n        return;\n      }\n      if (segment === 1) {\n        this.next();\n      }\n      if (segment === 3) {\n        this.prev();\n      }\n      if (segment === 4) {\n        this.prev(2);\n      }\n      if (segment === 5) {\n        this.prev(3);\n      }\n      if (segment === 6) {\n        this.next(4);\n      }\n      if (segment === 7) {\n        this.next(3);\n      }\n      if (segment === 8) {\n        this.next(2);\n      }\n    },\n    getSegment(a) {\n      return Math.ceil(a / (360 / 8));\n    },\n    getAngle(x, y) {\n      let x1 = this.W / 2 - this.W / 2;\n      let y1 = 0 - this.W / 2;\n      let x2 = x - this.W / 2;\n      let y2 = y - this.W / 2;\n      let scalar = x1 * x2 + y1 * y2;\n      let v1 = Math.sqrt(x1 * x1 + y1 * y1);\n      let v2 = Math.sqrt(x2 * x2 + y2 * y2);\n      let alpha = scalar / (v1 * v2);\n      if (x < this.W / 2) {\n        return ((Math.PI - Math.acos(alpha) + Math.PI) * 180) / Math.PI;\n      } else {\n        return (Math.acos(alpha) * 180) / Math.PI;\n      }\n    },\n    dotsRange(x1, y1, x2, y2) {\n      return Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n    },\n    next(step = 1) {\n      this.deg += this.step * step;\n      this.lastRotation = \"next\";\n    },\n    prev(step = 1) {\n      this.deg -= this.step * step;\n      this.lastRotation = \"prev\";\n    },\n    initWheelEvents() {\n      this.$refs.wheel.addEventListener(\"wheel\", e => {\n        e.preventDefault();\n        if (!this.allowRotate) {\n          return;\n        }\n        this.allowRotate = false;\n        setTimeout(() => {\n          this.allowRotate = true;\n        }, 300);\n        if (e.deltaY > 0) {\n          this.next();\n        } else {\n          this.prev();\n        }\n      });\n    }\n  },\n  mounted() {\n    if (!this.disabled) {\n      this.initWheelEvents();\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\">\n.wheel {\n  width: 586px;\n  height: 586px;\n  position: relative;\n  overflow: hidden;\n  background-image: url(\"/img/wheel/wheelOutlineCircle.png\");\n  padding: 8px;\n  background-position: center;\n  background-size: contain;\n  user-select: none;\n  transform: rotate(-67deg);\n  &:before {\n    content: \"\";\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    cursor: pointer;\n    z-index: 1;\n    border-radius: 50%;\n  }\n  &:after {\n    content: \"\";\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    width: calc(100% - 120px);\n    height: calc(100% - 120px);\n    cursor: default;\n    z-index: 2;\n    border-radius: 50%;\n  }\n  .greekBorder {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    width: 480px;\n  }\n  .img {\n    position: absolute;\n    left: 8px;\n    top: 8px;\n    width: calc(100% - 16px);\n    height: calc(100% - 16px);\n  }\n  .rotateItem {\n    transition: 0.3s ease-in-out;\n  }\n  .section {\n    transition: 0.3s ease-in-out;\n    &.next.allow {\n      animation-name: next;\n      animation-duration: 0.3s;\n    }\n    &.prev.allow {\n      animation-name: prev;\n      animation-duration: 0.3s;\n    }\n    @keyframes next {\n      0% {\n        transform: rotate(0deg);\n      }\n      30% {\n        transform: rotate(5deg);\n      }\n      100% {\n        transform: rotate(0deg);\n      }\n    }\n    @keyframes prev {\n      0% {\n        transform: rotate(0deg);\n      }\n      50% {\n        transform: rotate(-5deg);\n      }\n      100% {\n        transform: rotate(0deg);\n      }\n    }\n  }\n}\n</style>\n"]}]}